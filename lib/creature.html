<!DOCTYPE html><html lang="en"><head><title>lib/creature</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../"><meta name="groc-document-path" content="lib/creature"><meta name="groc-project-path" content="lib/creature.coffee"><meta name="groc-github-url" content="https://github.com/Yoshiyuka/meteor-mud"><link rel="stylesheet" type="text/css" media="all" href="../assets/style.css"><script type="text/javascript" src="../assets/behavior.js"></script><body><div id="meta"><div class="file-path"><a href="https://github.com/Yoshiyuka/meteor-mud/blob/master/lib/creature.coffee">lib/creature.coffee</a></div></div><div id="document"><div class="segment"><div class="comments "><div class="wrapper"><h1 id="creature">Creature</h1>

<hr />

<p>Base class that Players, NPCs, and Enemies are derived from. Represents a creature entity in the game world. </p></div></div><div class="code"><div class="wrapper"><span class="k">class</span> <span class="nx">Creature</span>
    <span class="nv">constructor: </span><span class="nf">(options) -&gt;</span>
        <span class="k">for</span> <span class="nx">key</span><span class="p">,</span><span class="nx">option</span> <span class="k">of</span> <span class="nx">options</span>
            <span class="nx">@</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">option</span>
        <span class="vi">@cooldown = </span><span class="mi">0</span>

    <span class="nv">tick: </span><span class="p">()</span> <span class="o">=&gt;</span>
        <span class="c1">#decrease cooldown if not 0. Action will be performed on next tick.</span>
        <span class="k">if</span> <span class="nx">@cooldown</span> <span class="o">&gt;</span> <span class="mi">0</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span> <span class="s">&quot;decreasing cooldown timer&quot;</span>
            <span class="nx">@cooldown</span><span class="o">--</span>
            <span class="k">return</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span> <span class="nx">@name</span> <span class="o">+</span> <span class="s">&quot; thought of doing something.&quot;</span>

    <span class="nv">setCooldown: </span><span class="nf">(value) -&gt;</span>
        <span class="vi">@cooldown = </span><span class="nx">value</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h3 id="communication-methods">Communication Methods:</h3></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p><strong>say(String)</strong> - allows the creature to send a message to the current room it is in.</p></div></div><div class="code"><div class="wrapper">    <span class="nv">say: </span><span class="nf">(message) -&gt;</span>
        <span class="k">if</span> <span class="nx">@currentRoom</span>  <span class="o">isnt</span> <span class="kc">undefined</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><ul>
<li>Inserts the document into the client-side minimongo database which is then attempted to sync with the server database.</li>
</ul></div></div><div class="code"><div class="wrapper">            <span class="nx">Messages</span><span class="p">.</span><span class="nx">insert</span><span class="p">({</span><span class="nv">text: </span><span class="nx">@name</span> <span class="o">+</span> <span class="s">&quot; says: &quot;</span> <span class="o">+</span> <span class="nx">message</span><span class="p">,</span> <span class="nv">broadcastTo: </span><span class="nx">@currentRoom</span><span class="p">,</span> <span class="nv">sender: </span><span class="nx">@owner</span><span class="p">,</span> <span class="nv">timestamp: </span><span class="nx">share</span><span class="p">.</span><span class="nx">World</span><span class="p">.</span><span class="nx">Time</span><span class="p">()})</span>
        <span class="k">else</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span> <span class="nx">@_id</span> <span class="o">+</span> <span class="s">&quot;: Can&#39;t say to room as currentRoom is undefined. Value: &quot;</span> <span class="o">+</span> <span class="nx">@currentRoom</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p><strong>yell(String)</strong> - allows the creature to send a message to all rooms in the current region that it is in.</p></div></div><div class="code"><div class="wrapper">    <span class="nv">yell: </span><span class="nf">(message) -&gt;</span>
        <span class="k">if</span> <span class="nx">@currentRoom</span> <span class="o">isnt</span> <span class="kc">undefined</span>
            <span class="nv">region = </span><span class="nx">Rooms</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span><span class="nv">name: </span><span class="nx">@currentRoom</span><span class="p">}).</span><span class="nx">region</span>
            
            <span class="k">if</span> <span class="nx">region</span> <span class="o">isnt</span> <span class="kc">undefined</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><ul>
<li>Inserts the document into the client-side minimongo database which is then attempted to sync with the server database.</li>
</ul></div></div><div class="code"><div class="wrapper">                <span class="nx">Messages</span><span class="p">.</span><span class="nx">insert</span><span class="p">({</span><span class="nv">text: </span><span class="nx">@name</span> <span class="o">+</span> <span class="s">&quot; yells: &quot;</span> <span class="o">+</span> <span class="nx">message</span><span class="p">,</span> <span class="nv">broadcastTo: </span><span class="nx">region</span><span class="p">,</span> <span class="nv">sender: </span><span class="nx">@owner</span><span class="p">,</span> <span class="nv">timestamp: </span><span class="nx">share</span><span class="p">.</span><span class="nx">World</span><span class="p">.</span><span class="nx">Time</span><span class="p">()})</span>
            <span class="k">else</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span> <span class="nx">@_id</span> <span class="o">+</span> <span class="s">&quot;: Can&#39;t yell to region as region is undefined. Value: &quot;</span> <span class="o">+</span> <span class="nx">region</span>
        <span class="k">else</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span> <span class="nx">@_id</span> <span class="o">+</span> <span class="s">&quot;: Can&#39;t yell to region as currentRoom is undefined. Value: &quot;</span> <span class="o">+</span> <span class="nx">@currentRoom</span>

        </div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p><strong>Make the Creature class available to all .coffee files in the project.</strong></p></div></div><div class="code"><div class="wrapper"><span class="nv">share.Creature = </span><span class="nx">Creature</span></div></div></div></div></body></html>